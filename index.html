<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#0a0a0a" />
    <title>Scorpion Store</title>
    <meta name="description" content="Scorpion Store — Forged in Battle, Made for Warriors." />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
      :root{
        --max:1200px;
        --pad:16px;
        --ink:#f2f2f2;
        --bg:#0a0a0a;
        --panel:#111;
        --line:#242424;
        --thumb:#B9B9B9; /* RGB(185,185,185) */
      }
      *{box-sizing:border-box}
      html,body{height:100%;margin:0}
      body{
        background:var(--bg);
        color:var(--ink);
        font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      h1,h2,h3,h4,.brand span,.menu a{
        font-family: "Bebas Neue", Impact, Haettenschweiler, "Arial Narrow Bold", sans-serif;
        letter-spacing:.8px;
        text-transform: uppercase;
      }
      a{color:inherit;text-decoration:none}

      header{position:sticky; top:0; z-index:10; background:#0d0d0d; border-bottom:1px solid var(--line)}
      .navbar{max-width:var(--max); margin:0 auto; padding:14px var(--pad); display:flex; align-items:center; gap:14px}
      .brand{display:flex; align-items:center; gap:12px; font-weight:800}
      .brand img{height:56px; width:auto; display:block; filter: drop-shadow(0 0 6px rgba(0,0,0,.5))}
      .brand span{font-size:28px; line-height:1}
      .spacer{flex:1}
      .menu{display:flex; gap:12px; flex-wrap:wrap}
      .menu a{
        padding:10px 14px;
        border:1px solid #363636;
        border-radius:999px;
        opacity:.98;
        transition: transform .12s ease, background .12s ease, color .12s ease, border-color .12s ease;
        font-size:18px;
      }
      .menu a:hover{background:var(--ink); color:var(--bg); transform: translateY(-1px); border-color:transparent}
      .menu a.active{background:var(--ink); color:var(--bg); border-color:transparent}

      main{max-width:var(--max); margin:0 auto; padding:28px var(--pad)}
      [data-route]{display:none}
      [data-route].is-active{display:block}

      /* HERO */
      .hero-wrap{margin:0 calc(-1 * var(--pad));}
      .hero{
        position:relative;
        min-height:70vh;
        display:grid;
        place-items:center;
        overflow:hidden;
        border-radius:18px;
        border:1px solid var(--line);
        background:#0f0f0f;
        isolation:isolate;
      }
      .hero .bg-strip{
        position:absolute; inset:0;
        display:grid;
        grid-template-columns:repeat(2, 1fr);
        gap:6px;
        padding:6px;
        opacity:.22;
        z-index:0;
      }
      .hero .bg-strip img{
        width:100%; height:100%;
        object-fit:contain;
        object-position:center;
        background:var(--thumb);
        filter:saturate(1.05) contrast(1.05) brightness(.95) drop-shadow(0 4px 8px rgba(0,0,0,.4));
        border-radius:12px;
      }
      .hero .overlay{
        position:relative;
        z-index:1;
        text-align:center;
        padding:32px 16px;
        text-shadow:0 2px 10px rgba(0,0,0,.55);
        display:flex;
        flex-direction:column;
        align-items:center;
        gap:10px;
      }
      .hero .logo-big{width:clamp(320px, 56vw, 720px); height:auto}
      .hero .headline{font-size:clamp(40px, 7vw, 92px); line-height:.95; letter-spacing:1px; margin:0}
      .hero .sub{font:600 clamp(14px, 1.8vw, 18px)/1.4 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; opacity:.9; margin:0}

      .crumbs{opacity:.7; margin-bottom:16px}

      /* GALLERIES */
      .gallery{display:grid; grid-template-columns:repeat(auto-fill, minmax(220px,1fr)); gap:16px}
      .card{border:1px solid var(--line); border-radius:18px; overflow:hidden; background:var(--panel); padding:12px; cursor:pointer}
      .thumb-wrap{
        width:100%;
        aspect-ratio:1/1;
        background: var(--thumb) !important;
        border-radius:12px;
        display:grid;
        place-items:center;
        overflow:hidden;
      }
      .thumb-wrap img{
        width:100%;
        height:100%;
        object-fit:contain;
        background: transparent !important;
        display:block;
      }
      .gallery img{background: var(--thumb) !important}

      /* Lightbox */
      .lightbox{position:fixed; inset:0; background: rgba(0,0,0,.92); display:none; align-items:center; justify-content:center; z-index:9999}
      .lightbox.show{display:flex}
      .lightbox img{max-width:92vw; max-height:88vh; object-fit:contain; background:var(--thumb); border-radius:12px}
      .lb-btn{position:fixed; top:50%; transform:translateY(-50%); font:800 28px/1 "Bebas Neue", sans-serif; color:#fff; background:transparent; border:none; cursor:pointer; padding:10px 14px}
      .lb-prev{left:10px}
      .lb-next{right:10px}
      .lb-close{position:fixed; top:16px; right:16px; font:800 28px/1 "Bebas Neue", sans-serif; color:#fff; background:#222; border:1px solid #444; border-radius:10px; padding:8px 12px}

      .footer{opacity:.7; text-align:center; padding:28px 0; border-top:1px solid var(--line); margin-top:32px}

      @media (max-width: 640px){
        .brand img{height:48px}
        .brand span{font-size:24px}
        .menu a{font-size:16px}
        .hero{min-height:58vh}
        .hero .bg-strip{gap:4px; padding:4px}
      }
    </style>
  </head>
  <body>
    <!-- Early normalize: force #home on first paint if hash missing/bad -->
    <script>
      (function() {
        var h = location.hash || "";
        if (h === "" || h === "#" || h === "#/" || h === "#!/" || /^#\\/+$/i.test(h)) {
          location.replace(location.pathname.replace(/#.*$/, "") + "#home");
        }
      })();
    </script>

    <header>
      <nav class="navbar">
        <a class="brand" href="#home"><img src="scorpion-logo.png" alt="Logo"><span>Scorpion Store</span></a>
        <div class="spacer"></div>
        <div class="menu" id="menu">
          <a href="#home" data-link="home">Home</a>
          <a href="#hoodies" data-link="hoodies">Hoodies</a>
          <a href="#tshirts" data-link="tshirts">T-Shirts</a>
          <a href="#rashguards" data-link="rashguards">Rash Guards</a>
          <a href="#logos" data-link="logos">Logos</a>
          <a href="#finalapparel" data-link="finalapparel">Final Apparel</a>
        </div>
      </nav>
    </header>

    <main>
      <!-- HOME (visible by default) -->
      <section data-route="home" id="route-home" class="is-active">
        <div class="hero-wrap">
          <section class="hero">
            <div class="bg-strip" id="heroBgStrip">
              <img alt="" />
              <img alt="" />
            </div>
            <div class="overlay">
              <img class="logo-big" src="scorpion-logo.png" alt="Logo">
              <h1 class="headline">ONLINE STORE</h1>
              <div class="sub">“Forged in Battle, Made for Warriors”</div>
            </div>
          </section>
        </div>
        <footer class="footer">© <span id="year"></span> Scorpion Fighting System</footer>
      </section>

      <!-- HOODIES -->
      <section data-route="hoodies" id="route-hoodies">
        <div class="crumbs"><a href="#home">Home</a> &nbsp;/&nbsp; Hoodies</div>
        <h1>Hoodies</h1>
        <div class="gallery" id="gallery-hoodies"></div>
      </section>

      <!-- T-SHIRTS -->
      <section data-route="tshirts" id="route-tshirts">
        <div class="crumbs"><a href="#home">Home</a> &nbsp;/&nbsp; T-Shirts</div>
        <h1>T-Shirts</h1>
        <div class="gallery" id="gallery-tshirts"></div>
      </section>

      <!-- RASH GUARDS -->
      <section data-route="rashguards" id="route-rashguards">
        <div class="crumbs"><a href="#home">Home</a> &nbsp;/&nbsp; Rash Guards</div>
        <h1>Rash Guards</h1>
        <div class="gallery" id="gallery-rashguards"></div>
      </section>

      <!-- LOGOS -->
      <section data-route="logos" id="route-logos">
        <div class="crumbs"><a href="#home">Home</a> &nbsp;/&nbsp; Logos</div>
        <h1>Logos</h1>
        <div class="gallery" id="gallery-logos"></div>
      </section>

      <!-- FINAL APPAREL -->
      <section data-route="finalapparel" id="route-finalapparel">
        <div class="crumbs"><a href="#home">Home</a> &nbsp;/&nbsp; Final Apparel</div>
        <h1>Final Apparel</h1>
        <div class="gallery" id="gallery-finalapparel"></div>
      </section>
    </main>

    <!-- Lightbox -->
    <div class="lightbox" id="lightbox" aria-hidden="true">
      <button class="lb-btn lb-prev" id="lbPrev" aria-label="Previous">‹</button>
      <img id="lbImg" src="" alt="">
      <button class="lb-btn lb-next" id="lbNext" aria-label="Next">›</button>
      <button class="lb-close" id="lbClose" aria-label="Close">Close ✕</button>
    </div>

    <script>
      const GH = { owner: "julioquinonesjr", repo: "ScorpionStore" };
      const FOLDERS = {
        hoodies: ["Hoodies"],
        tshirts: ["TShirts"],
        rashguards: ["Rash Guards"],
        logos: ["Logos"],
        finalapparel: ["Final Apparel"]
      };
      const EXT = ["jpg","jpeg","png","webp","gif","avif","bmp","svg"];

      /* Hero: exactly two images you specified */
      const HERO_INPUT = [
        { folder: "Rash Guards", name: "IMG_7001.PNG" },
        { folder: "Rash Guards", name: "IMG_6996.PNG" }
      ];

      async function ghGetFileRaw(folder, filename){
        const enc = `${encodeURIComponent(folder)}/${encodeURIComponent(filename)}`;
        const api = `https://api.github.com/repos/${GH.owner}/${GH.repo}/contents/${enc}`;
        const res = await fetch(api, { headers: { "Accept": "application/vnd.github.v3+json" } });
        if(!res.ok) return "";
        const meta = await res.json();
        return meta.download_url || "";
      }

      async function ghListImages(folder){
        const url = `https://api.github.com/repos/${GH.owner}/${GH.repo}/contents/${encodeURIComponent(folder)}`;
        const r = await fetch(url, { headers: { "Accept": "application/vnd.github.v3+json" } });
        if(!r.ok) return [];
        const items = await r.json();
        return Array.isArray(items) ? items
          .filter(x => x.type === "file" && EXT.includes(x.name.split(".").pop().toLowerCase()))
          .map(x => ({url:x.download_url, name:x.name})) : [];
      }

      const GALLERIES = { hoodies: [], tshirts: [], rashguards: [], logos: [], finalapparel: [] };

      function buildCard(src, i){
        const a = document.createElement("article");
        a.className = "card";
        a.dataset.index = i;
        a.innerHTML = `<div class="thumb-wrap"><img src="${src}" alt=""></div>`;
        return a;
      }

      async function renderGallery(k){
        const e = document.getElementById("gallery-"+k);
        if(!e || e.dataset.loaded === "1") return;
        const variants = FOLDERS[k] || [];
        let imgs = [];
        for(const v of variants){
          const found = await ghListImages(v);
          imgs = imgs.concat(found.map(it => it.url));
        }
        imgs = [...new Set(imgs)];
        GALLERIES[k] = imgs;
        const frag = document.createDocumentFragment();
        imgs.forEach((u,i)=> frag.appendChild(buildCard(u, i)));
        e.appendChild(frag);
        e.dataset.loaded = "1";
      }

      /* Lightbox */
      const LB = {
        el: document.getElementById("lightbox"),
        img: document.getElementById("lbImg"),
        prev: document.getElementById("lbPrev"),
        next: document.getElementById("lbNext"),
        close: document.getElementById("lbClose"),
        list: [],
        index: 0
      };
      function openLb(list, index){
        LB.list = list;
        LB.index = index;
        LB.img.src = list[index];
        LB.el.classList.add("show");
        LB.el.setAttribute("aria-hidden","false");
      }
      function closeLb(){
        LB.el.classList.remove("show");
        LB.el.setAttribute("aria-hidden","true");
        LB.img.src = "";
      }
      function lbPrev(){ if(!LB.list.length) return; LB.index = (LB.index - 1 + LB.list.length) % LB.list.length; LB.img.src = LB.list[LB.index]; }
      function lbNext(){ if(!LB.list.length) return; LB.index = (LB.index + 1) % LB.list.length; LB.img.src = LB.list[LB.index]; }
      LB.prev.addEventListener("click", lbPrev);
      LB.next.addEventListener("click", lbNext);
      LB.close.addEventListener("click", closeLb);
      LB.el.addEventListener("click", (e)=>{ if(e.target === LB.el) closeLb(); });
      window.addEventListener("keydown", (e)=>{
        if(!LB.el.classList.contains("show")) return;
        if(e.key === "Escape") closeLb();
        if(e.key === "ArrowLeft") lbPrev();
        if(e.key === "ArrowRight") lbNext();
      });

      /* Delegate clicks from any gallery */
      document.addEventListener("click", (e)=>{
        const card = e.target.closest(".card");
        if(!card) return;
        const routeKey = card.closest("[data-route]").id.replace("route-","");
        const idx = Number(card.dataset.index || 0);
        const list = GALLERIES[routeKey] || [];
        if(list.length) openLb(list, idx);
      });

      /* Router */
      const ROUTES = ["home","hoodies","tshirts","rashguards","logos","finalapparel"];
      const SECTIONS = Object.fromEntries(ROUTES.map(r => [r, document.getElementById("route-"+r)]));
      const MENU = document.getElementById("menu");

      function setActiveLink(key){
        Array.from(MENU.querySelectorAll("a")).forEach(a => {
        a.classList.toggle("active", a.dataset.link === key);
        });
      }
      function normalizeHash(raw){
        const cleaned = (raw || "#home").replace(/^#+\/?/, "#");
        const lower = decodeURIComponent(cleaned).replace(/^#+/, "").toLowerCase();
        if(lower === "" || lower === "home") return "home";
        if(lower.includes("hoodie")) return "hoodies";
        if(lower.includes("tshirt") || lower.includes("t-shirts") || lower.includes("tee")) return "tshirts";
        if(lower.includes("rash")) return "rashguards";
        if(lower.includes("logo")) return "logos";
        if(lower.includes("final")) return "finalapparel";
        return "home";
      }
      async function route(){
        const key = normalizeHash(location.hash);
        ROUTES.forEach(r => SECTIONS[r].classList.toggle("is-active", r === key));
        setActiveLink(key);
        if(key !== "home") await renderGallery(key);
        window.scrollTo({top:0, behavior:"instant"});
      }

      window.addEventListener("hashchange", route);
      window.addEventListener("DOMContentLoaded", async ()=>{
        document.getElementById("year").textContent = new Date().getFullYear();

        // Load hero images
        const rashUrl = await ghGetFileRaw("Rash Guards", "IMG_7001.PNG");
        const teeUrl  = await ghGetFileRaw("Rash Guards", "IMG_6996.PNG");
        const strip = document.getElementById("heroBgStrip");
        if(strip){
          const imgs = strip.querySelectorAll("img");
          imgs[0].src = rashUrl || "";
          imgs[1].src = teeUrl  || rashUrl || "";
        }

        // Safety: ensure something is active
        var anyActive = Array.from(document.querySelectorAll("[data-route]")).some(s => s.classList.contains("is-active"));
        if (!anyActive && document.getElementById("route-home")) {
          document.getElementById("route-home").classList.add("is-active");
        }

        await route();
      });
    </script>
  </body>
</html>
